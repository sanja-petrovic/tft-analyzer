FROM bde2020/spark-master:latest

USER root

COPY --from=python:3.9 /usr/local/bin/python3.9 /usr/local/bin/python3.9

# Set the PATH to prioritize /usr/local/bin
ENV PATH /usr/local/bin:$PATH

# Verify the default Python version
RUN python --version

# Set environment variables
ENV PYSPARK_PYTHON=/usr/local/bin/python3.9
ENV PYTHONPATH /usr/local/bin/python3.9
ENV PYSPARK_DRIVER_PYTHON=/usr/local/bin/python3.9